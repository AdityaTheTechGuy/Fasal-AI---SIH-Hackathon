<!DOCTYPE html>
<html lang="{{ get_locale() }}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fasal AI - {{ _('AI Crop Recommendation System') }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="language-selector">
        <select id="language-select" onchange="window.location.href = '/change-lang/' + this.value;"
            aria-label="{{ _('Select Language') }}">
            {% for lang_code, lang_name in languages.items() %}
            <option value="{{ lang_code }}" {% if get_locale()|string==lang_code %}selected{% endif %}>
                {{ lang_name }}
            </option>
            {% endfor %}
        </select>
        <button class="btn btn--icon" onclick="playText('current-text')" title="{{ _('Listen') }}">
            <i class="fas fa-volume-up"></i>
        </button>
    </div>

    <!-- Error message container for JavaScript errors -->
    <div id="error-message" class="alert alert--error" style="display: none;"></div>

    <header class="hero">
        <div class="container">
            <div class="hero-content">
                <div class="hero-text">
                    <h1><i class="fas fa-seedling"></i> FasalAI</h1>
                    <h2>{{ _('Smart Crop Recommendation System') }}</h2>
                    <p>{{ _('Smart India Hackathon 2025 - Revolutionizing Agriculture with Artificial Intelligence') }}
                    </p>
                    <p class="hero-description" id="current-text">{{ _('Get personalized crop recommendations based on
                        soil nutrients,
                        climate conditions, and advanced machine learning algorithms. Make informed farming decisions
                        with 98.18%% accuracy.') }}</p>
                    <button class="btn btn--primary" onclick="scrollToForm()">
                        <i class="fas fa-chart-line"></i> {{ _('Start Analysis') }}
                    </button>
                </div>
                <div class="hero-visual">
                    <div class="hero-stats">
                        <div class="stat-card">
                            <i class="fas fa-brain"></i>
                            <h3>{{_('98.18%%') }}</h3>
                            <p>{{ _('AI Accuracy') }}</p>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-leaf"></i>
                            <h3>{{ _('22+') }}</h3>
                            <p>{{ _('Crop Types') }}</p>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-globe"></i>
                            <h3>7</h3>
                            <p>{{ _('Parameters') }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Live Prediction Section -->
    <section class="input-section">
        <div class="container">
            <h2><i class="fas fa-location-dot"></i> {{ _('Live Location-Based Recommendation') }}</h2>
            <p class="section-description">{{ _('Get instant crop recommendations based on your current location and real-time data from OpenWeatherMap and SoilGrids APIs') }}</p>

            <div class="live-prediction-card">
                <div class="live-prediction-content">
                    <div class="live-prediction-info">
                        <i class="fas fa-satellite"></i>
                        <h3>{{ _('Real-time Analysis') }}</h3>
                        <p>{{ _('Our system analyzes current weather conditions from OpenWeatherMap and soil data from SoilGrids to provide the most accurate recommendation.') }}</p>
                    </div>
                    
                    <div class="live-prediction-action">
                        <button id="getLocationBtn" class="btn btn--primary btn--lg">
                            <i class="fas fa-location-crosshairs"></i>
                            {{ _('Get Recommendation For My Location') }}
                        </button>
                        <p class="privacy-note">
                            <i class="fas fa-shield-alt"></i>
                            {{ _('Your location data is only used for crop recommendation and is not stored.') }}
                        </p>
                    </div>
                </div>
                
                <div id="live-result" class="live-result"></div>
            </div>
        </div>
    </section>

    <section class="input-section" id="input-form">
        <div class="container">
            <h2><i class="fas fa-sliders-h"></i>{{ _('Manual Soil & Climate Analysis') }}</h2>
            <p class="section-description">{{ _('Adjust the parameters below to get personalized crop recommendations')
                }}</p>

            <form method="POST" action="{{ url_for('predict') }}" id="crop-prediction-form">
                <div class="form-grid">
                    <div class="parameter-group">
                        <div class="parameter-card">
                            <div class="parameter-header">
                                <i class="fas fa-flask"></i>
                                <h3>{{ _('Nitrogen') }} </h3>
                                <span class="parameter-unit">kg/ha</span>
                            </div>
                            <p class="parameter-description">{{ _('Essential for vegetative growth and chlorophyll
                                formation') }}</p>
                            <div class="input-group">
                                <input type="range" id="nitrogen" name="nitrogen" min="0" max="200"
                                    value="{{ input_values.nitrogen if input_values else 50 }}" class="slider">
                                <input type="number" id="nitrogen-input" min="0" max="200"
                                    value="{{ input_values.nitrogen if input_values else 50 }}" class="number-input">
                            </div>
                        </div>
                    </div>
                    <div class="parameter-group">
                        <div class="parameter-card">
                            <div class="parameter-header">
                                <i class="fas fa-seedling"></i>
                                <h3>{{ _('Phosphorus') }} (P)</h3>
                                <span class="parameter-unit">kg/ha</span>
                            </div>
                            <p class="parameter-description">{{ _('Important for root development and flowering') }}</p>
                            <div class="input-group">
                                <input type="range" id="phosphorus" name="phosphorus" min="0" max="150"
                                    value="{{ input_values.phosphorus if input_values else 30 }}" class="slider">
                                <input type="number" id="phosphorus-input" min="0" max="150"
                                    value="{{ input_values.phosphorus if input_values else 30 }}" class="number-input">
                            </div>
                        </div>
                    </div>
                    <div class="parameter-group">
                        <div class="parameter-card">
                            <div class="parameter-header">
                                <i class="fas fa-shield-alt"></i>
                                <h3>{{ _('Potassium') }} (K)</h3>
                                <span class="parameter-unit">kg/ha</span>
                            </div>
                            <p class="parameter-description">{{ _('Enhances disease resistance and fruit quality')}}</p>
                            <div class="input-group">
                                <input type="range" id="potassium" name="potassium" min="0" max="300"
                                    value="{{ input_values.potassium if input_values else 40 }}" class="slider">
                                <input type="number" id="potassium-input" min="0" max="300"
                                    value="{{ input_values.potassium if input_values else 40 }}" class="number-input">
                            </div>
                        </div>
                    </div>
                    <div class="parameter-group">
                        <div class="parameter-card">
                            <div class="parameter-header">
                                <i class="fas fa-thermometer-half"></i>
                                <h3>{{ _('Temperature')}}</h3>
                                <span class="parameter-unit">Â°C</span>
                            </div>
                            <p class="parameter-description">{{ _('Average growing season temperature') }}</p>
                            <div class="input-group">
                                <input type="range" id="temperature" name="temperature" min="5" max="45"
                                    value="{{ input_values.temperature if input_values else 25 }}" class="slider">
                                <input type="number" id="temperature-input" min="5" max="45"
                                    value="{{ input_values.temperature if input_values else 25 }}" class="number-input">
                            </div>
                        </div>
                    </div>
                    <div class="parameter-group">
                        <div class="parameter-card">
                            <div class="parameter-header">
                                <i class="fas fa-tint"></i>
                                <h3>{{ _('Humidity') }}</h3>
                                <span class="parameter-unit">%</span>
                            </div>
                            <p class="parameter-description">{{ _('Relative humidity levels') }}</p>
                            <div class="input-group">
                                <input type="range" id="humidity" name="humidity" min="10" max="100"
                                    value="{{ input_values.humidity if input_values else 60 }}" class="slider">
                                <input type="number" id="humidity-input" min="10" max="100"
                                    value="{{ input_values.humidity if input_values else 60 }}" class="number-input">
                            </div>
                        </div>
                    </div>
                    <div class="parameter-group">
                        <div class="parameter-card">
                            <div class="parameter-header">
                                <i class="fas fa-balance-scale"></i>
                                <h3>{{ _('pH Level') }}</h3>
                                <span class="parameter-unit">pH</span>
                            </div>
                            <p class="parameter-description">{{ _('Soil acidity/alkalinity level') }}</p>
                            <div class="input-group">
                                <input type="range" id="ph" name="ph" min="3" max="10" step="0.1"
                                    value="{{ input_values.ph if input_values else 6.5 }}" class="slider">
                                <input type="number" id="ph-input" min="3" max="10" step="0.1"
                                    value="{{ input_values.ph if input_values else 6.5 }}" class="number-input">
                            </div>
                        </div>
                    </div>
                    <div class="parameter-group">
                        <div class="parameter-card">
                            <div class="parameter-header">
                                <i class="fas fa-cloud-rain"></i>
                                <h3>{{ _('Rainfall') }}</h3>
                                <span class="parameter-unit">mm</span>
                            </div>
                            <p class="parameter-description">{{ _('Annual precipitation') }}</p>
                            <div class="input-group">
                                <input type="range" id="rainfall" name="rainfall" min="20" max="300"
                                    value="{{ input_values.rainfall if input_values else 150 }}" class="slider">
                                <input type="number" id="rainfall-input" min="20" max="300"
                                    value="{{ input_values.rainfall if input_values else 150 }}" class="number-input">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-submit-section" style="text-align: center; margin-top: 2rem; padding: 1rem;">
                    <button type="submit" class="btn btn--primary btn--lg">
                        <i class="fas fa-seedling"></i> {{ _('Get Recommendation') }}
                    </button>
                    <p style="font-size: 0.875rem; color: var(--color-text-secondary); margin-top: 0.5rem;">
                        {{ _('Click to analyze soil conditions and get AI-powered crop recommendations') }}
                    </p>
                </div>
            </form>
        </div>
    </section>

    {% if error %}
    <section class="message-section" style="padding: 1rem 0; background-color: var(--color-bg-4);">
        <div class="container">
            <div class="alert alert--error"
                style="background: rgba(var(--color-error-rgb), 0.1); border: 1px solid rgba(var(--color-error-rgb), 0.3); border-radius: var(--radius-base); padding: 1rem; color: var(--color-error);">
                <i class="fas fa-exclamation-circle"></i>
                <strong>{{ _('Error:') }}</strong> {{ error }}
            </div>
        </div>
    </section>
    {% endif %}

    <section class="results-section" id="results" style="display: none;">
        <div class="container">
            <h2><i class="fas fa-chart-bar"></i> {{ _('AI Recommendations') }}</h2>

            <div class="results-grid">
                <div class="primary-recommendation">
                    <div class="card">
                        <div class="card__body">
                            <div class="primary-crop-header">
                                <h3>{{ _('Best Crop Recommendation') }}</h3>
                                <div class="confidence-badge">
                                    <span id="primary-confidence">0%</span> {{ _('Confidence') }}
                                </div>
                            </div>
                            <div class="primary-crop-content">
                                <div class="crop-icon" id="primary-crop-icon">ðŸŒ±</div>
                                <div class="crop-details">
                                    <h2 id="primary-crop-name">{{ _('Select parameters to see recommendations') }}</h2>
                                    <div class="crop-info-grid">
                                        <div class="info-item">
                                            <i class="fas fa-calendar"></i>
                                            <span id="primary-crop-season">{{ _('Adjust sliders to see data') }}</span>
                                        </div>
                                        <div class="info-item">
                                            <i class="fas fa-tint"></i>
                                            <span id="primary-crop-water">{{ _('Adjust sliders to see data') }}</span>
                                        </div>
                                        <div class="info-item">
                                            <i class="fas fa-mountain"></i>
                                            <span id="primary-crop-soil">{{ _('Adjust sliders to see data') }}</span>
                                        </div>
                                    </div>
                                    <div class="crop-tips">
                                        <h4><i class="fas fa-lightbulb"></i> {{ _('Growing Tips') }}</h4>
                                        <p id="primary-crop-tips">{{ _('Adjust the parameters above to get personalized
                                            growing tips for your recommended crop.') }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="alternative-recommendations">
                    <h3>{{ _('Alternative Recommendations') }}</h3>
                    <div id="alternative-crops" class="alternative-grid">
                        <div class="alternative-crop">
                            <div class="alternative-crop-icon">ðŸŒ½</div>
                            <h4>{{ _('Maize') }}</h4>
                            <div class="alternative-confidence confidence-medium">75% {{ _('Match') }}</div>
                            <p>{{ _('Kharif/Rabi season crop') }}</p>
                        </div>
                        <div class="alternative-crop">
                            <div class="alternative-crop-icon">ðŸ«˜</div>
                            <h4>{{ _('Chickpea') }}</h4>
                            <div class="alternative-confidence confidence-medium">68% {{ _('Match') }}</div>
                            <p>{{ _('Rabi season crop') }}</p>
                        </div>
                        <div class="alternative-crop">
                            <div class="alternative-crop-icon">ðŸŒ±</div>
                            <h4>{{ _('Cotton') }}</h4>
                            <div class="alternative-confidence confidence-low">52% {{ _('Match') }}</div>
                            <p>{{ _('Kharif season crop') }}</p>
                        </div>
                    </div>
                </div>

                <div class="chart-container" style="position: relative; height: 300px;">
                    <canvas id="suitabilityChart"></canvas>
                </div>
            </div>
        </div>
    </section>

    <section class="education-section">
        <div class="container">
            <h2><i class="fas fa-graduation-cap"></i> {{ _('Agricultural Knowledge') }}</h2>
            <div class="education-grid">
                <div class="education-card">
                    <div class="card">
                        <div class="card__body">
                            <i class="fas fa-flask"></i>
                            <h3>{{ _('Soil Nutrients') }}</h3>
                            <p>{{ _('Learn about the essential nutrients required for optimal crop growth and how to
                                maintain soil health.') }}</p>
                        </div>
                    </div>
                </div>
                <div class="education-card">
                    <div class="card">
                        <div class="card__body">
                            <i class="fas fa-cloud-sun"></i>
                            <h3>{{ _('Climate Impact') }}</h3>
                            <p>{{ _('Understand how temperature, humidity, and rainfall affect different crops and
                                farming practices.') }}</p>
                        </div>
                    </div>
                </div>
                <div class="education-card">
                    <div class="card">
                        <div class="card__body">
                            <i class="fas fa-seedling"></i>
                            <h3>{{ _('Crop Rotation') }}</h3>
                            <p>{{ _('Discover the benefits of crop rotation and how it improves soil fertility and
                                reduces pests.') }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3><i class="fas fa-seedling"></i> FasalAI</h3>
                    <p>{{ _('Revolutionizing agriculture with AI-powered crop recommendations for better farming
                        decisions.') }}</p>
                </div>
                <div class="footer-section">
                    <h4>{{ _('Quick Links') }}</h4>
                    <ul>
                        <li><a href="#input-form">{{ _('Crop Analysis') }}</a></li>
                        <li><a href="#results">{{ _('Recommendations') }}</a></li>
                        <li><a href="#">{{ _('About Us') }}</a></li>
                        <li><a href="#">{{ _('Contact') }}</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>{{ _('Supported Crops') }}</h4>
                    <p>{{ _('Rice, Maize, Cotton, Apple, Banana, Coffee, and 16+ more crops with detailed growing
                        information.') }}</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 FasalAI - {{ _('Smart India Hackathon Project. All rights reserved.') }}</p>
            </div>
        </div>
    </footer>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>

</html>